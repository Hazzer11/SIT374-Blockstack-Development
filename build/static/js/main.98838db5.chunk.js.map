{"version":3,"sources":["api.js","Profile.js","Signin.js","App.js","index.js"],"names":["openSocket","Profile","props","state","person","name","avatarUrl","username","newText","currentDocument","timestamp","isLoading","this","handleSignOut","userSession","isSignInPending","classname","className","id","src","alt","onClick","bind","created_at","Date","toLocaleString","weekday","month","day","year","hour","minute","second","hour12","timeZoneName","placeholder","onChange","e","handleChange","value","disabled","text","saveNewText","newDocument","now","putFile","JSON","stringify","encrypt","then","setState","getFile","decrypt","file","docFile","parse","Person","loadUserData","profile","loadNewText","event","target","Component","Signin","handleSignIn","appConfig","AppConfig","UserSession","App","preventDefault","redirectToSignIn","signUserOut","window","location","origin","isUserSignedIn","handlePendingSignIn","userData","history","replaceState","document","title","ReactDOM","render","BrowserRouter","getElementById"],"mappings":"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","file":"static/js/main.98838db5.chunk.js","sourcesContent":["import openSocket from 'socket.io-client';\r\nconst  socket = openSocket('http://localhost:8000');\r\n\r\nexport function subscribeToTimer(callback) {\r\n    socket.on('timer', timestamp => callback(null, timestamp));\r\n    socket.emit('subscribeToTimer', 1000);\r\n  }","import React, { Component } from 'react';\r\nimport * as api from './api'\r\nimport {\r\n  Person,\r\n} from 'blockstack';\r\n\r\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\r\n\r\nexport default class Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n\r\n  \tthis.state = {\r\n  \t  person: {\r\n  \t  \tname() {\r\n          return 'Anonymous';\r\n        },\r\n  \t  \tavatarUrl() {\r\n  \t  \t  return avatarFallbackImage;\r\n  \t  \t},\r\n  \t  },\r\n      username:\"\",\r\n      newText:\"\",\r\n      currentDocument:[],\r\n\r\n      timestamp: '',\r\n      isLoading: false\r\n    };\r\n\r\n  }\r\n\r\n  render() {\r\n    const { handleSignOut, userSession } = this.props;\r\n    const { person } = this.state;\r\n    const { username } = this.state;\r\n\r\n    return (\r\n      !userSession.isSignInPending() ?\r\n\r\n        <div classname=\"mainsection\">\r\n          <div className=\"panel-welcome\" id=\"section-2\">\r\n            <div className=\"avatar-section\">\r\n              <img src={ person.avatarUrl() ? person.avatarUrl() : avatarFallbackImage } className=\"img-rounded avatar\" id=\"avatar-image\" alt=\"\"/>\r\n              <div className=\"username\">\r\n                <h4>\r\n                  <span id=\"heading-name\">{ person.name() ? person.name()\r\n                     : 'Nameless Person'}</span>\r\n                </h4>\r\n              <span>{this.state.username}</span>\r\n              </div>\r\n          </div>\r\n            <p className=\"lead\">\r\n              <button\r\n                className=\"btn btn-primary btn-lg\"\r\n                id=\"signout-button\"\r\n                onClick={ handleSignOut.bind(this) }>\r\n                Logout\r\n              </button>\r\n            </p>\r\n          </div>\r\n\r\n          <div>\r\n            <h2>\r\n              Welcome to PaperState!\r\n            </h2>\r\n            <p>\r\n              Lasted updated: {this.state.currentDocument.created_at ? new Date(this.state.currentDocument.created_at).toLocaleString('en-US', {\r\n                weekday: 'short',\r\n                month: 'short',\r\n                day: 'numeric',\r\n                year: 'numeric',\r\n                hour: 'numeric',\r\n                minute: 'numeric',\r\n                second: 'numeric',\r\n                hour12: true,\r\n                timeZoneName: 'short'\r\n              }) : \"No File yet\"}\r\n            </p>\r\n          </div>\r\n\r\n          <div id=\"section-3\">\r\n            <div id=\"Text-section\">\r\n              <div id=\"Fill-in-text\">\r\n                <textarea className=\"input-status\"\r\n                  placeholder=\"Document text goes here\"\r\n                  onChange={e=>this.handleChange(e)}\r\n                  value={this.state.newText}\r\n\r\n                  />\r\n                </div>\r\n              <div id=\"Formatted-text\">\r\n                <textarea className=\"input-status\"\r\n                  placeholder=\"formatted text goes here\"\r\n                  disabled='disabled'\r\n                  value={this.state.currentDocument.text}>\r\n                  </textarea>\r\n              </div>\r\n              <div id=\"Submit-button\">\r\n                <button\r\n                onClick={e => this.saveNewText(e)}\r\n                >\r\n                Submit Changes\r\n                </button>\r\n\r\n              </div>\r\n            </div>\r\n            </div>\r\n          </div>:null\r\n\r\n\r\n\r\n\r\n    );\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  saveNewText() {\r\n     const { userSession } = this.props\r\n     let currentDocument = this.state.currentDocument\r\n\r\n     let newDocument = {\r\n       text: this.state.newText,\r\n       created_at: Date.now()\r\n     }\r\n\r\n\r\n     const options = { encrypt: true }\r\n     userSession.putFile('Document.json', JSON.stringify(newDocument), options)\r\n       .then(() => {\r\n         this.setState({\r\n           currentDocument:newDocument\r\n         })\r\n       })\r\n   }\r\n\r\n  loadNewText() {\r\n      const { userSession } = this.props\r\n      const options = { decrypt: true }\r\n      userSession.getFile('Document.json', options)\r\n      .then((file) => {\r\n        var docFile = JSON.parse(file || '[]')\r\n        this.setState({\r\n          currentDocument: docFile,\r\n          newText:docFile.text\r\n        })\r\n      })\r\n    }\r\n\r\n  componentWillMount() {\r\n    const { userSession } = this.props\r\n    this.setState({\r\n      person: new Person(userSession.loadUserData().profile),\r\n      username: userSession.loadUserData().username\r\n    });\r\n    this.loadNewText();\r\n   }\r\n\r\n  handleChange(event) {\r\n   this.setState({newText: event.target.value});\r\n    }\r\n\r\n\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nexport default class Signin extends Component {\r\n\r\n  render() {\r\n    const { handleSignIn } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-landing\" id=\"section-1\">\r\n        <h1 className=\"landing-heading\">PaperState</h1>\r\n          <div className=\"sign-in-blockstack\">\r\n            <button\r\n              className=\"btn btn-primary btn-lg btn-mar\"\r\n              id=\"signin-button\"\r\n              onClick={ handleSignIn.bind(this) }\r\n            >\r\n              Sign In\r\n            </button>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { subscribeToTimer } from './api';\r\nimport Profile from './Profile.js';\r\nimport Signin from './Signin.js';\r\nimport {\r\n  UserSession,\r\n  AppConfig\r\n} from 'blockstack';\r\n\r\nconst appConfig = new AppConfig(['store_write', 'publish_data'])\r\nconst userSession = new UserSession({ appConfig: appConfig })\r\n\r\nexport default class App extends Component {\r\n\r\n\r\n  handleSignIn(e) {\r\n    e.preventDefault();\r\n    userSession.redirectToSignIn();\r\n  }\r\n\r\n  handleSignOut(e) {\r\n    e.preventDefault();\r\n    userSession.signUserOut(window.location.origin);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"site-wrapper\">\r\n        <div className=\"site-wrapper-inner\">\r\n          { !userSession.isUserSignedIn() ?\r\n            <Signin userSession={userSession} handleSignIn={ this.handleSignIn } />\r\n            : <Profile userSession={userSession} handleSignOut={ this.handleSignOut } />\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (userSession.isSignInPending()) {\r\n      userSession.handlePendingSignIn().then((userData) => {\r\n        window.history.replaceState({}, document.title, \"/\")\r\n        this.setState({ userData: userData})\r\n      });\r\n    }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport App from './App.js';\r\n\r\n// Require Sass file so webpack can build it\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport'./styles/style.css';\r\n\r\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}