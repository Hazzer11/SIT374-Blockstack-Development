(this["webpackJsonphello-blockstack"]=this["webpackJsonphello-blockstack"]||[]).push([[0],{273:function(e,t,n){e.exports=n(576)},304:function(e,t){},317:function(e,t){},319:function(e,t){},330:function(e,t){},332:function(e,t){},343:function(e,t){},345:function(e,t){},450:function(e,t){},507:function(e,t){},572:function(e,t,n){},576:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),r=n(270),s=n.n(r),c=n(579),o=n(36),l=n(37),u=n(64),m=n(63),d=n(271);n.n(d)()("http://localhost:8000");var h=n(80),p=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return"https://s3.amazonaws.com/onename/avatar-placeholder.png"}},username:"",newText:"",currentDocument:[],timestamp:"",isLoading:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.handleSignOut,a=t.userSession,r=this.state.person;this.state.username;return a.isSignInPending()?null:i.a.createElement("div",{classname:"mainsection"},i.a.createElement("div",{className:"panel-welcome",id:"section-2"},i.a.createElement("div",{className:"avatar-section"},i.a.createElement("img",{src:r.avatarUrl()?r.avatarUrl():"https://s3.amazonaws.com/onename/avatar-placeholder.png",className:"img-rounded avatar",id:"avatar-image",alt:""}),i.a.createElement("div",{className:"username"},i.a.createElement("h4",null,i.a.createElement("span",{id:"heading-name"},r.name()?r.name():"Nameless Person")),i.a.createElement("span",null,this.state.username))),i.a.createElement("p",{className:"lead"},i.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signout-button",onClick:n.bind(this)},"Logout"))),i.a.createElement("div",null,i.a.createElement("h2",null,"Welcome to PaperState!"),i.a.createElement("p",null,"Lasted updated: ",this.state.currentDocument.created_at?new Date(this.state.currentDocument.created_at).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0,timeZoneName:"short"}):"No File yet")),i.a.createElement("div",{id:"section-3"},i.a.createElement("div",{id:"Text-section"},i.a.createElement("div",{id:"Fill-in-text"},i.a.createElement("textarea",{className:"input-status",placeholder:"Document text goes here",onChange:function(t){return e.handleChange(t)},value:this.state.newText})),i.a.createElement("div",{id:"Formatted-text"},i.a.createElement("textarea",{className:"input-status",placeholder:"formatted text goes here",disabled:"disabled",value:this.state.currentDocument.text})),i.a.createElement("div",{id:"Submit-button"},i.a.createElement("button",{onClick:function(t){return e.saveNewText(t)}},"Submit Changes")))))}},{key:"saveNewText",value:function(){var e=this,t=this.props.userSession,n=(this.state.currentDocument,{text:this.state.newText,created_at:Date.now()});t.putFile("Document.json",JSON.stringify(n),{encrypt:!0}).then((function(){e.setState({currentDocument:n})}))}},{key:"loadNewText",value:function(){var e=this;this.props.userSession.getFile("Document.json",{decrypt:!0}).then((function(t){var n=JSON.parse(t||"[]");e.setState({currentDocument:n,newText:n.text})}))}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new h.Person(e.loadUserData().profile),username:e.loadUserData().username}),this.loadNewText()}},{key:"handleChange",value:function(e){this.setState({newText:e.target.value})}}]),n}(a.Component),v=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSignIn;return i.a.createElement("div",{className:"panel-landing",id:"section-1"},i.a.createElement("h1",{className:"landing-heading"},"PaperState"),i.a.createElement("div",{className:"sign-in-blockstack"},i.a.createElement("button",{className:"btn btn-primary btn-lg btn-mar",id:"signin-button",onClick:e.bind(this)},"Sign In")))}}]),n}(a.Component),g=new h.AppConfig(["store_write","publish_data"]),f=new h.UserSession({appConfig:g}),b=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"handleSignIn",value:function(e){e.preventDefault(),f.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),f.signUserOut(window.location.origin)}},{key:"render",value:function(){return i.a.createElement("div",{className:"site-wrapper"},i.a.createElement("div",{className:"site-wrapper-inner"},f.isUserSignedIn()?i.a.createElement(p,{userSession:f,handleSignOut:this.handleSignOut}):i.a.createElement(v,{userSession:f,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;f.isSignInPending()&&f.handlePendingSignIn().then((function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})}))}}]),n}(a.Component);n(571),n(572);s.a.render(i.a.createElement(c.a,null,i.a.createElement(b,null)),document.getElementById("root"))}},[[273,1,2]]]);
//# sourceMappingURL=main.98838db5.chunk.js.map